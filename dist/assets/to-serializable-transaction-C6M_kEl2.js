const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/resolveImplementation-DOyOspcW.js","assets/main-DJ16BhX4.js","assets/extractIPFS-DyfdIBe8.js","assets/getInstalledModules-DK45b1YP.js","assets/eth_estimateGas-CQRCGL1X.js","assets/send-eip712-transaction-DnkUOfPZ.js","assets/eth_sendRawTransaction-DPdnXbFR.js","assets/concat-hex-DMI7yKoA.js","assets/eth_getTransactionCount-Cx-wocGS.js"])))=>i.map(i=>d[i]);
import{a5 as N,a6 as O,a7 as U,a8 as M,a9 as B,aa as V,ab as $,ac as H,ad as j,ae as Z,x as k,af as u,ag as E,k as W,P as S,y as v,S as c,F as K,r as Y,_ as f,V as J,a3 as Q,a4 as X,A as z,s as q,e as P,ah as T,a1 as ee,R as te}from"./main-DJ16BhX4.js";import{t as ne}from"./units-DR3SBGns.js";import{download as ae}from"./download-D83avpFf.js";function re(e){const t=[],n=e.length;for(let a=0;a<n;a++){const r=e[a],i=N(r);t.push(i)}return t}function ie(e){const t=O(e),n=[],a=e.length;for(let r=0;r<a;r++){const i=e[r];U(i)||n.push(M(i,t))}return n}const se={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},oe={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function ce(e){const{abi:t,data:n}=e,a=B(n,0,4);if(a==="0x")throw new V;const i=[...t||[],se,oe].find(s=>s.type==="error"&&a===$(H(s)));if(!i)throw new j(a,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?Z(i.inputs,B(n,4)):void 0,errorName:i.name}}const de={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function ue(e){const t={};return typeof e.authorizationList<"u"&&(t.authorizationList=le(e.authorizationList)),typeof e.accessList<"u"&&(t.accessList=e.accessList),typeof e.blobVersionedHashes<"u"&&(t.blobVersionedHashes=e.blobVersionedHashes),typeof e.blobs<"u"&&(typeof e.blobs[0]!="string"?t.blobs=e.blobs.map(n=>k(n)):t.blobs=e.blobs),typeof e.data<"u"&&(t.data=e.data),typeof e.from<"u"&&(t.from=e.from),typeof e.gas<"u"&&(t.gas=u(e.gas)),typeof e.gasPrice<"u"&&(t.gasPrice=u(e.gasPrice)),typeof e.maxFeePerBlobGas<"u"&&(t.maxFeePerBlobGas=u(e.maxFeePerBlobGas)),typeof e.maxFeePerGas<"u"&&(t.maxFeePerGas=u(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=u(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(t.nonce=u(e.nonce)),typeof e.to<"u"&&(t.to=e.to),typeof e.type<"u"&&(t.type=de[e.type]),typeof e.value<"u"&&(t.value=u(e.value)),t}function le(e){return e.map(t=>({address:t.address,r:t.r?u(BigInt(t.r)):t.r,s:t.s?u(BigInt(t.s)):t.s,chainId:u(t.chainId),nonce:u(t.nonce),...typeof t.yParity<"u"?{yParity:u(t.yParity)}:{},...typeof t.v<"u"&&typeof t.yParity>"u"?{v:u(t.v)}:{}}))}const fe={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function me(e){const t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?E(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?E(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?fe[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(t.authorizationList=ye(e.authorizationList)),t.yParity=(()=>{if(e.yParity)return Number(e.yParity);if(typeof t.v=="bigint"){if(t.v===0n||t.v===27n)return 0;if(t.v===1n||t.v===28n)return 1;if(t.v>=35n)return t.v%2n===0n?1:0}})(),t.type==="legacy"&&(delete t.accessList,delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),t.type==="eip2930"&&(delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),t.type==="eip1559"&&delete t.maxFeePerBlobGas,t}function ye(e){return e.map(t=>({address:t.address,chainId:Number(t.chainId),nonce:Number(t.nonce),r:t.r,s:t.s,yParity:Number(t.yParity)}))}function pe(e){const t=(e.transactions??[]).map(n=>typeof n=="string"?n:me(n));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}function ge(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}async function Pe(e,t){const n=t.blockTag??"latest",a=t.includeTransactions??!1,r=t.blockNumber!==void 0?W(t.blockNumber):void 0,i=await e({method:"eth_getBlockByNumber",params:[r||n,a]});if(!i)throw new Error("Block not found");return pe(i)}async function be(e){const t=await e({method:"eth_maxPriorityFeePerGas"});return S(t)}async function he(e){const t=await e({method:"eth_gasPrice"});return S(t)}async function C(e){const{client:t,chain:n,percentMultiplier:a}=e,r=v({chain:n,client:t}),i=await he(r),s=a?i/BigInt(100)*BigInt(a):0n;return i+s}function x(e){if(e===0n||(e&e-1n)===0n)return e;let t=1n;for(;e>0n;)e>>=1n,t<<=1n;return t}const xe=[78600,2040,248,9372,841,842,2016,9768,2442,1942999413,1952959480,994873017,19011,40875,1511670449,5464,2020,2021,98866];async function Fe(e){var s;const[t,n,a,r]=await Promise.all([c(e.maxFeePerGas),c(e.maxPriorityFeePerGas),c(e.gasPrice),c(e.type)]);if(t!==void 0&&n!==void 0)return{maxFeePerGas:t,maxPriorityFeePerGas:n};if(typeof a=="bigint")return{gasPrice:a};const i=await _e(e.client,e.chain,r==="legacy"?"legacy":"eip1559");return(s=e.chain.experimental)!=null&&s.increaseZeroByteCount?i.gasPrice?{gasPrice:x(i.gasPrice)}:{maxFeePerGas:t??x(i.maxFeePerGas??0n),maxPriorityFeePerGas:n??x(i.maxPriorityFeePerGas??0n)}:i.gasPrice!==void 0?i:{maxFeePerGas:t??i.maxFeePerGas,maxPriorityFeePerGas:n??i.maxPriorityFeePerGas}}async function _e(e,t,n){if((n??t.feeType)==="legacy"||xe.includes(t.id))return{gasPrice:await C({chain:t,client:e,percentMultiplier:10})};const r=await we(e,t);return r.maxFeePerGas!==null&&r.maxPriorityFeePerGas!==null?{maxFeePerGas:r.maxFeePerGas,maxPriorityFeePerGas:r.maxPriorityFeePerGas}:{gasPrice:await C({chain:t,client:e,percentMultiplier:10})}}async function we(e,t,n=10){let a=null,r=null;const i=v({chain:t,client:e}),[s,l]=await Promise.all([Pe(i,{blockTag:"latest"}),be(i).catch(()=>null)]),m=s==null?void 0:s.baseFeePerGas,d=t.id;return d===220||d===1220?{maxFeePerGas:null,maxPriorityFeePerGas:null}:(d===80002||d===137?r=await ve(d):l!==null&&(r=l),r==null||m==null?{maxFeePerGas:null,maxPriorityFeePerGas:null}:(r=Ge(r,n),a=m*2n+r,(d===42220||d===44787||d===62320)&&(r=a),{maxFeePerGas:a,maxPriorityFeePerGas:r}))}function Ge(e,t=10){const n=e/BigInt(100)*BigInt(t);return e+n}function Ie(e){switch(e){case 137:return"https://gasstation.polygon.technology/v2";case 80002:return"https://gasstation-testnet.polygon.technology/v2"}}const Ae=31n;async function ve(e){const t=Ie(e);try{const a=(await(await fetch(t)).json()).fast.maxPriorityFee;if(a>0){const r=Number.parseFloat(a).toFixed(9);return ne(r,9)}}catch(n){console.error("failed to fetch gas",n)}return Ae}const Be=ge({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.drpc.org"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc8Af999e38273D658BE1b921b88A9Ddf005769cC",blockCreated:5317080}},testnet:!0});function Ee(e,t="https://contract.thirdweb.com/abi"){return K(async()=>{if(e.abi)return e.abi;if(e.chain.id===31337||e.chain.id===1337||e.chain.id===Be.id)return await R(e);try{return await Te(e,t)}catch{return await R(e)}},{cacheKey:`${e.chain.id}-${e.address}`,cacheTime:1e3*60*60*1})}async function Te(e,t="https://contract.thirdweb.com/abi"){const a=await(await Y(e.client)(`${t}/${e.chain.id}/${e.address}`)).json();if(!a||a.error)throw new Error(`Failed to resolve ABI from contract API. ${a.error||""}`);return a}async function D(e){const[{resolveImplementation:t},{extractIPFSUri:n}]=await Promise.all([f(()=>import("./resolveImplementation-DOyOspcW.js"),__vite__mapDeps([0,1])),f(()=>import("./extractIPFS-DyfdIBe8.js"),__vite__mapDeps([2,1]))]),{bytecode:a}=await t(e);if(a==="0x"){const{id:i,name:s}=e.chain;throw new Error(`Failed to load contract bytecode. Make sure the contract [${e.address}] exists on the chain [${s||"Unknown Chain"} (chain id: ${i})]`)}const r=n(a);if(!r)return[];try{return(await(await ae({client:e.client,uri:r})).json()).output.abi}catch{return[]}}const Ce={inputs:[],name:"getAllPlugins",outputs:[{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"},{internalType:"address",name:"pluginAddress",type:"address"}],internalType:"struct IPluginMap.Plugin[]",name:"registered",type:"tuple[]"}],stateMutability:"view",type:"function"},Re={inputs:[],name:"getAllExtensions",outputs:[{components:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"metadataURI",type:"string"},{internalType:"address",name:"implementation",type:"address"}],internalType:"struct IExtension.ExtensionMetadata",name:"metadata",type:"tuple"},{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"}],internalType:"struct IExtension.ExtensionFunction[]",name:"functions",type:"tuple[]"}],internalType:"struct IExtension.Extension[]",name:"allExtensions",type:"tuple[]"}],stateMutability:"view",type:"function"},Le={inputs:[],name:"facets",outputs:[{components:[{internalType:"address",name:"facetAddress",type:"address"},{internalType:"bytes4[]",name:"functionSelectors",type:"bytes4[]"}],type:"tuple[]"}],stateMutability:"view",type:"function"};async function R(e,t,n){const[a,r,i,s,l]=await Promise.all([D(e),Se(e),De(e),Ne(e),Oe(e)]),m=[...new Set([...r,...i,...s,...l])];if(!m.length)return a;const d=await Ue({contract:e,plugins:m,resolveSubAbi:n});return Me({pluginAbis:d,rootAbi:a})}async function Se(e){try{const{readContract:t}=await f(async()=>{const{readContract:a}=await import("./main-DJ16BhX4.js").then(r=>r.bg);return{readContract:a}},[]),n=await t({contract:e,method:Ce});return n.length?[...new Set(n.map(a=>a.pluginAddress))]:[]}catch{}return[]}async function De(e){try{const{readContract:t}=await f(async()=>{const{readContract:a}=await import("./main-DJ16BhX4.js").then(r=>r.bg);return{readContract:a}},[]),n=await t({contract:e,method:Re});return n.length?[...new Set(n.map(a=>a.metadata.implementation))]:[]}catch{}return[]}async function Ne(e){try{const{getInstalledModules:t}=await f(async()=>{const{getInstalledModules:a}=await import("./getInstalledModules-DK45b1YP.js");return{getInstalledModules:a}},__vite__mapDeps([3,1])),n=await t({contract:e});return n.length?[...new Set(n.map(a=>a.implementation))]:[]}catch{}return[]}async function Oe(e){try{const{readContract:t}=await f(async()=>{const{readContract:a}=await import("./main-DJ16BhX4.js").then(r=>r.bg);return{readContract:a}},[]),n=await t({contract:e,method:Le});return n.length?n.map(a=>a.facetAddress):[]}catch{}return[]}async function Ue(e){return Promise.all(e.plugins.map(t=>{const n=J({...e.contract,address:t});return e.resolveSubAbi?e.resolveSubAbi(n):D(n)}))}function Me(e){let t=e.pluginAbis.flat().filter(a=>a.type!=="constructor");e.rootAbi&&(t=[...e.rootAbi,...t].filter(a=>a.type!=="fallback"&&a.type!=="receive").filter(Boolean));const n=[...new Set(re(t))];return ie(n)}async function L(e){var i;const{error:t,contract:n,fromAddress:a}=e;Q(t)&&n&&X({chainId:(i=n.chain)==null?void 0:i.id,client:n.client,contractAddress:n.address,error:t,walletAddress:a});const r=await Ve({contract:n,error:t});return r?new $e(r,n):t}async function Ve(e){const{error:t,contract:n}=e;if(typeof t=="object"){const a=t;if(a.data&&a.data!=="0x"&&z(a.data)){let r=n==null?void 0:n.abi;n&&!r&&(r=await Ee(n).catch(()=>{}));const i=ce({abi:r,data:a.data});return`${i.errorName}${i.args?` - ${i.args}`:""}`}}return`Execution Reverted: ${q(t)}`}class $e extends Error{constructor(t,n){var r;let a=t;super(a),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"chainId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TransactionError",this.contractAddress=n==null?void 0:n.address,this.chainId=(r=n==null?void 0:n.chain)==null?void 0:r.id,this.message=a}}const A=new WeakMap;async function He(e){var i,s;const t=typeof e.from=="string"?e.from??void 0:((i=e.from)==null?void 0:i.address)??((s=e.account)==null?void 0:s.address),n={...e.transaction,from:t};if(A.has(n))return A.get(n);const{account:a}=e,r=(async()=>{var y,w;const l=await c(e.transaction.gas);if(l!==void 0)return l;if(a!=null&&a.estimateGas)try{let o=await a.estimateGas(e.transaction);return(y=e.transaction.chain.experimental)!=null&&y.increaseZeroByteCount&&(o=x(o)),o}catch(o){throw await L({contract:e.transaction.__contract,error:o,fromAddress:t})}const{encode:m}=await f(async()=>{const{encode:o}=await import("./main-DJ16BhX4.js").then(p=>p.be);return{encode:o}},[]),[d,F,G,h]=await Promise.all([m(e.transaction),c(e.transaction.to),c(e.transaction.value),c(e.transaction.authorizationList)]),[{getRpcClient:I},{eth_estimateGas:_}]=await Promise.all([f(()=>import("./main-DJ16BhX4.js").then(o=>o.bf),[]),f(()=>import("./eth_estimateGas-CQRCGL1X.js"),__vite__mapDeps([4,1]))]),b=I(e.transaction);try{const o=ue({authorizationList:h==null?void 0:h.map(g=>({...g,contractAddress:P(g.address),nonce:Number(g.nonce),r:T(g.r),s:T(g.s)})),data:d,from:t?P(t):void 0,to:F?P(F):void 0,value:G});let p=await _(b,o);return(w=e.transaction.chain.experimental)!=null&&w.increaseZeroByteCount&&(p=x(p)),p}catch(o){throw await L({contract:e.transaction.__contract,error:o,fromAddress:t})}})();return A.set(n,r),r}async function We(e){if(await ee(e.transaction.chain)){const{getZkGasFees:b}=await f(async()=>{const{getZkGasFees:p}=await import("./send-eip712-transaction-DnkUOfPZ.js").then(g=>g.a);return{getZkGasFees:p}},__vite__mapDeps([5,6,1,7])),{gas:y,maxFeePerGas:w,maxPriorityFeePerGas:o}=await b({from:typeof e.from=="string"?P(e.from):e.from!==void 0?P(e.from.address):void 0,transaction:e.transaction});e.transaction={...e.transaction,gas:y,maxFeePerGas:w,maxPriorityFeePerGas:o}}const n=v(e.transaction),a=e.transaction.chain.id,r=e.from;let[i,s,l,m,d,F,G,h,I]=await Promise.all([te(e.transaction),(async()=>{const b=await c(e.transaction.nonce);return b!==void 0?b:r?await f(async()=>{const{eth_getTransactionCount:y}=await import("./eth_getTransactionCount-Cx-wocGS.js");return{eth_getTransactionCount:y}},__vite__mapDeps([8,1])).then(({eth_getTransactionCount:y})=>y(n,{address:typeof r=="string"?P(r):P(r.address),blockTag:"pending"})):void 0})(),He({...e,from:e.from}),Fe(e.transaction),c(e.transaction.to),c(e.transaction.accessList),c(e.transaction.value),c(e.transaction.authorizationList),c(e.transaction.type)]);const _=await c(e.transaction.extraGas);return _&&(l+=_),{accessList:F,authorizationList:h,chainId:a,data:i,gas:l,nonce:s,to:d,type:I,value:G,...m}}export{fe as a,ce as d,_e as g,We as t};
