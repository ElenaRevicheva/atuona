import{aw as h,a7 as p,ax as m,ay as f,az as b,aA as w}from"./main-xw8jArdM.js";import{sendBatchTransaction as g}from"./send-batch-transaction-_DxUl6HZ.js";async function T(o){const s=await h(o);return p(s)}const r=new m(1e3);async function x(o){const{account:s,calls:c}=o,t=[],a=w(65);if(r.set(a,t),s.sendBatchTransaction){const e=await g({account:s,transactions:c});t.push(e.transactionHash),r.set(a,t)}else for(const e of c){const i=await T({account:s,transaction:e});t.push(i.transactionHash),r.set(a,t)}return a}async function y(o){const{chain:s,client:c,id:t}=o,a=r.get(t);if(!a)throw new Error("Failed to get calls status, unknown bundle id");const e=f({chain:s,client:c});let i="success";const d=await Promise.all(a.map(l=>b(e,{hash:l}).then(n=>({blockHash:n.blockHash,blockNumber:n.blockNumber,gasUsed:n.gasUsed,logs:n.logs.map(u=>({address:u.address,data:u.data,topics:u.topics})),status:n.status,transactionHash:n.transactionHash})).catch(()=>(i="pending",null))));return{atomic:!1,chainId:s.id,id:t,receipts:d.filter(l=>l!==null),status:i,statusCode:200,version:"2.0.0"}}export{y as inAppWalletGetCallsStatus,x as inAppWalletSendCalls};
